<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprPWalkUnarmed</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-2</depth>
  <persistent>0</persistent>
  <parentName>objPlayer</parentName>
  <maskName>sprMask</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox = 1 
    {
    scrInitXboxButtons()
    }

if room = rmTutorial 
    {
    global.maskindex=3
    global.maskon=1
    global.done=1
    }

global.pigkill = 0
image_speed = 0
currentweapon = 0
dir = 0
movex = 0
movey = 0
move = 0
viewspeed = 0
myxspeed = 0
myyspeed = 0
myspeed = 0
reload = 20
light = 0
legdir = 0
legindex = 0
left = 1
ammo = 0
energie = round(random(1))

if global.maskon = 1 
    {
    if global.maskindex = 9 energie = 1
    if global.maskindex = 21 energie = 2
    }

throwreload = 0

if global.controller = 1
    {
    instance_create(x,y,objPlayerController) 
    instance_destroy()
    }

scrInitThrowPos()
scrInitMaskPos()
scrUpdateMaskPos(sprite_index)

last_sprite = sprite_index
throwindex = 0
masksprite = -1
maskindex = global.maskindex
maskon = global.maskon
release = 0
shieldwait = 0
aim = 0
if global.maskon = 1
    {
    if global.maskindex = 9 energie = 1
    if global.maskindex = 21 energie = 2
    }

global.enemy = -1234

if !variable_local_exists("clear") clear = 0
if !place_free(x,y) 
    {
    x = global.executionx
    y = global.executiony
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !place_meeting(x,y,objPlayerCarEnter) {
my_id=instance_create(x,y,objPVomit)
my_id.image_angle=dir
instance_destroy()
}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox = 1 
    {
    scrXboxPlayerMouse()
    }

if sprite_index = sprPWalkBoilingPot 
    {
    if round(random(5)) = 2 
    instance_create(x + lengthdir_x(11, dir - 33 * left), y + lengthdir_y(11, dir - 33 * left), objSteam)
    }

if sprite_index = sprPigButcherShoot 
    {
    if !mouse_check_button(mb_left) 
        {
            if image_index &gt; 0.2 {image_index -= 0.2}
            else 
                {
                image_index = 0 sprite_index = sprPigButcherWalkMP5
                }
        }
    }
    
if room = rmTrainstationDownstairs or room = rmPoliceHQFloor3 or instance_exists(objVan) or room = rmPhoneHomUpstairs
    {
    clear = 1
    }

if instance_number(objEnemy)+instance_number(objKnockedOut)+instance_number(objECrawl)+instance_number(objMiscEnemy)+instance_number(objBoss)+instance_number(objEHideM16)+instance_number(objEBullet)=0 
    {
    test = 1
    
    if room=rmHotelEntrance 
        {
        if objFatmanEating.sprite_index=sprFatmanEating or objFatmanEating.sprite_index=sprFatmanEatingGiveUp or objFatmanTelephone.sprite_index=sprFatmanTelephone or objFatmanTelephone.sprite_index=sprFatmanTelephoneGiveUp 
            {
            test = 0
            }
        }
    if room = rmHotelSuite 
        {
        if objFatmanShit.sprite_index = sprFatmanShit or objFatmanShit.sprite_index = sprFatmanShitGiveUp  test = 0
        }
    if test = 1 
        {
        if clear = 0 and global.done = 0 
            {
            clear = 1
            my_id = instance_create(x,y,objCheckpoint)
            my_id.text = "STAGE CLEAR"
            }
        }
    } else clear = 0

if global.xbox = 0 
    {
    aimfar = keyboard_check_direct(vk_shift)
    } else 
        {
        aimfar = checkbutton(0,getid(9))
        }

global.test = 0

with objWeapon 
    {
    if point_distance(x, y, objPlayer.x, objPlayer.y) &lt; 32 
        {
        global.test = 2
        }
    }

if place_meeting(x,y,objKnockedOut) global.test = 1
objEffector.action = global.test
if throwreload &gt; 0 throwreload -= 1

if aimfar 
    {
    if global.maskindex = 7 factor = 2 else factor = 1
    if global.xbox=1 
        {
        viewx = objPlayer.x + rightthumb_x(0) * 0.0045
        viewy = objPlayer.y - rightthumb_y(0) * 0.003
        } else 
            {
            viewx = objPlayer.x + ((display_mouse_get_x() - display_get_width() * 0.5) * (view_wview[0]/display_get_width()))*factor
            viewy = objPlayer.y + ((display_mouse_get_y() - display_get_height() * 0.5) * (view_hview[0]/display_get_height()))*factor
            }
    viewspeed=point_distance(view_xview[0]+view_wview[0]/2,view_yview[0]+view_hview[0]/2,viewx,viewy)*0.1
    viewdir=point_direction(view_xview[0]+view_wview[0]/2,view_yview[0]+view_hview[0]/2,viewx,viewy)
    view_xview[0]+=lengthdir_x(viewspeed,viewdir)
    view_yview[0]+=lengthdir_y(viewspeed,viewdir)
    vdist=point_distance(x,y,room_width/2,room_height/2)
    vdir=point_direction(room_width/2,room_height/2,x,y)
    view_angle[0]=lengthdir_y(vdist*(1/160),vdir*2)
    } else 
        {
        viewspeed=point_distance(view_xview[0]+view_wview[0]/2,view_yview[0]+view_hview[0]/2,x+lengthdir_x(24,dir),y+lengthdir_y(24,dir))*0.1
        viewdir=point_direction(view_xview[0]+view_wview[0]/2,view_yview[0]+view_hview[0]/2,x+lengthdir_x(24,dir),y+lengthdir_y(24,dir))
        
        view_xview[0]+=lengthdir_x(viewspeed,viewdir)
        view_yview[0]+=lengthdir_y(viewspeed,viewdir)
        
        vdist=point_distance(x,y,room_width/2,room_height/2)
        vdir=point_direction(room_width/2,room_height/2,x,y)
        view_angle[0]=lengthdir_y(vdist*(1/160),vdir*2)
        }

xview=view_xview[0]
yview=view_yview[0]

if persistent = 1 and objEffector.fade = 1 
    {
    if place_free(x + addx, y) x += addx
    if place_free(x, y + addy) y += addy
    if image_speed = 0 image_index += 0.15
    legindex += 0.4
    exit 
    }

scrPlayerMoveKeyboard()

if (sprite_index=sprPAttackKnife or sprite_index=sprPAttackBat or sprite_index=sprPAttackCrowbar or sprite_index=sprPAttackPan or sprite_index=sprPAttackPot or sprite_index=sprPAttackMachete or sprite_index=sprPAttackSledgeHammer or sprite_index=sprPigButcherAttack or sprite_index=sprPAttackNightStick or sprite_index=sprPAttackPipe or sprite_index=sprPAttackClub or sprite_index=sprPAttackSword or sprite_index=sprPAttackAxe or sprite_index=sprPAttackPool or sprite_index=sprPAttackPoolBroke) or (global.maskindex=2 and sprite_index=sprPAttackPunch) {
lastx=x
lasty=y
global.spacex=lengthdir_x(12,dir)
global.spacey=lengthdir_y(12,dir)
x+=global.spacex
y+=global.spacey
global.my_id=id
with objGlassPanelH {
if place_meeting(x,y,global.my_id) {
SteamIncStat("Windows",1)
if global.my_id.lasty&lt;y+2 {
add=-1
} else {
add=1
}
i=0
repeat (24) {
my_id=instance_create(x+i*1.5,y,objShard)
my_id.speed=random(5)
my_id.direction=add*90-8+random(16)
i+=1
}
instance_create(x,y,objGlassPanelHBroken)
global.shake=4
instance_destroy()
if !audio_is_playing(sndGlass1) and !audio_is_playing(sndGlass2) {
audio_play_sound(choose(sndGlass1,sndGlass2),0,false)
}
}
}

with objGlassPanelV {
if place_meeting(x,y,global.my_id) {
SteamIncStat("Windows",1)
if global.my_id.lastx&lt;x+2 {
add=-1
} else {
add=1
}
i=0
repeat (24) {
my_id=instance_create(x,y+i*1.5,objShard)
my_id.speed=random(5)
my_id.direction=90+add*90-8+random(16)
i+=1
}
instance_create(x,y,objGlassPanelVBroken)
global.shake=4
instance_destroy()
if !audio_is_playing(sndGlass1) and !audio_is_playing(sndGlass2) {
audio_play_sound(choose(sndGlass1,sndGlass2),0,false)
}
}
}

x+=lengthdir_x(12,dir)
y+=lengthdir_y(12,dir)


with objEnemy {
if place_meeting(x,y,objPlayer) or place_meeting(x+global.spacex,y+global.spacey,objPlayer) {
mask_index=sprWeaponMask 
if scrCollisionLineExt(x,y,objPlayer.lastx,objPlayer.lasty,4,objSolid,objDoorV,objWallSoftH) or object_index=objEnemyFat or object_index=objInspector nothing=1 else {//{mask_index=sprMask objPlayer.x=objPlayer.lastx objPlayer.y=objPlayer.lasty exit}
mask_index=sprMask
global.shake=7
my_id=instance_create(x,y-12,objScore)
if object_get_parent(object_index)=objEnemyIdle {
if room=rmTrainstationEntrance sprite_index=sprEWalkKnife else sprite_index=choose(sprEWalkShotgun,sprEWalkM16)
}
if sprite_index=sprEWalkUnarmed or sprite_index=sprPoliceWalkUnarmed {
my_id.text="+"+string((100)+100*global.factor)+"pts" 
global.myscore+=(100)+100*global.factor
global.boldscore=100*global.factor
global.killscore+=100
global.combo+=1
global.combotime=240
global.killx[global.kills]=x
global.killy[global.kills]=y
global.kills+=1
} else {
my_id.text="+"+string((200)+200*global.factor)+"pts"
global.myscore+=(200)+200*global.factor
global.killscore+=200
global.boldscore+=200*global.factor
global.combo+=1
global.combotime=240
global.killx[global.kills]=x
global.killy[global.kills]=y
global.kills+=1
if global.bonustime&lt;12+global.factor*4 global.bonustime=12+global.factor*4
if global.factor=2 ds_list_add(global.bonuslist,"Exposure")
if global.factor=3 ds_list_add(global.bonuslist,"Double Exposure")
if global.factor=4 ds_list_add(global.bonuslist,"Triple Exposure")
if global.factor&gt;4 ds_list_add(global.bonuslist,"Severe Exposure")
}
edir=point_direction(objPlayer.lastx,objPlayer.lasty,x,y)
repeat (8) {
my_id=instance_create(x-3+random(6)+lengthdir_x(8,edir),y-3+random(6)+lengthdir_y(8,edir),objBloodDrop)
my_id.image_xscale=1-random(0.2)
my_id.image_yscale=my_id.image_xscale
my_id.image_angle=point_direction(x+lengthdir_x(8,edir),y+lengthdir_y(8,edir),my_id.x,my_id.y)
my_id.sprite_index=sprBloodSplatSmall
my_id.direction=my_id.image_angle
my_id.speed=2+random(4)
}
repeat (2+random(3)) {
my_id=instance_create(x-3+random(6)+lengthdir_x(8,edir),y-3+random(6)+lengthdir_y(8,edir),objBloodDrop)
my_id.image_xscale=1-random(0.2)
my_id.image_yscale=my_id.image_xscale
my_id.image_angle=point_direction(x+lengthdir_x(8,edir),y+lengthdir_y(8,edir),my_id.x,my_id.y)
my_id.direction=my_id.image_angle
my_id.speed=1+random(5)
}
repeat (4) {
my_id=instance_create(x-3+random(6)+lengthdir_x(16,edir),y-3+random(6)+lengthdir_y(16,edir),objBloodSmoke)
my_id.image_xscale=1.2-random(0.2)
my_id.image_yscale=my_id.image_xscale
my_id.image_angle=edir-20+random(40)
my_id.direction=my_id.image_angle
my_id.speed=2+random(1)
my_id.friction=0.15
}
my_id=instance_create(x,y,objDeadBody)
if object_index=objDogPatrol {
SteamIncStat("Dogs",1)
if objPlayer.sprite_index=sprPAttackClub or objPlayer.sprite_index=sprPAttackBat or objPlayer.sprite_index=sprPAttackCrowbar or objPlayer.sprite_index=sprPAttackPan or objPlayer.sprite_index=sprPAttackPot or objPlayer.sprite_index=sprPAttackSledgeHammer or objPlayer.sprite_index=sprPigButcherAttack or objPlayer.sprite_index=sprPAttackPipe or objPlayer.sprite_index=sprPAttackPool or objPlayer.sprite_index=sprPAttackPunch {audio_play_sound(sndHit,0,false) audio_play_sound(sndPunch,0,false) my_id.sprite_index=sprDogDeadBlunt my_id.image_index=3+floor(random(3))} else {my_id.sprite_index=sprDogDeadCut audio_play_sound(choose(sndCut1,sndCut2),0,false) my_id.image_index=4+floor(random(3))}
} else {
if objPlayer.sprite_index=sprPAttackClub or objPlayer.sprite_index=sprPAttackBat or objPlayer.sprite_index=sprPAttackCrowbar or objPlayer.sprite_index=sprPigButcherAttack or objPlayer.sprite_index=sprPAttackPan or objPlayer.sprite_index=sprPAttackPot or objPlayer.sprite_index=sprPAttackSledgeHammer or objPlayer.sprite_index=sprPAttackPipe or objPlayer.sprite_index=sprPAttackPool or objPlayer.sprite_index=sprPAttackPunch {audio_play_sound(sndHit,0,false) audio_play_sound(sndPunch,0,false) my_id.sprite_index=choose(sprEBackBlunt,sprEBackBlunt,sprEFrontBlunt) my_id.image_index=4+floor(random(11)) if objPlayer.sprite_index=sprPAttackPool objPlayer.sprite_index=sprPWalkPoolBroke} 
if scrIsPolice(object_index) and (objPlayer.sprite_index=sprPAttackPunch or objPlayer.sprite_index=sprPAttackNightStick) {
my_id1=instance_create(x,y,objPoliceHat)
my_id1.direction=edir-10+random(20)
my_id1.speed=1+random(2)
audio_play_sound(sndHit,0,false) my_id.sprite_index=choose(sprPoliceBackBlunt,sprPoliceBackBlunt,sprPoliceFrontBlunt) my_id.image_index=floor(random(13))
if my_id.sprite_index=sprPoliceBackBlunt {
if my_id.image_index=2 or my_id.image_index=6 scrGoreBash(x,y,edir-180,1,1) else scrGoreBash(x,y,edir-180,0,0)
}
if my_id.sprite_index=sprPoliceFrontBlunt {
if my_id.image_index=2 or my_id.image_index=3 or my_id.image_index=4 scrGoreBash(x,y,edir-180,1,1) else scrGoreBash(x,y,edir-180,0,0)
}

}
if my_id.sprite_index=sprEBackBlunt {
if my_id.image_index=6 or my_id.image_index=12  or my_id.image_index=14 scrGoreBash(x,y,edir-180,1,1) else scrGoreBash(x,y,edir-180,0,0)
}
if my_id.sprite_index=sprEFrontBlunt {
if my_id.image_index=6 or my_id.image_index=7  or my_id.image_index=8 scrGoreBash(x,y,edir-180,1,1) else scrGoreBash(x,y,edir-180,0,0)
}
if objPlayer.sprite_index=sprPAttackKnife {my_id.sprite_index=sprEBackCut audio_play_sound(choose(sndCut1,sndCut2),0,false) my_id.image_index=2+floor(random(3)) if my_id.image_index=3 or my_id.image_index=4 scrGoreCut(x,y,edir-180,1) else scrGoreCut(x,y,edir-180,0)}
if objPlayer.sprite_index=sprPAttackPoolBroke {my_id.sprite_index=choose(sprEDeadBackPool,sprEDeadBackPool,sprEDeadFrontPool) audio_play_sound(choose(sndCut1,sndCut2),0,false) my_id.image_index=random(2) objPlayer.sprite_index=sprPWalkUnarmed objPlayer.image_speed=0}
if objPlayer.sprite_index=sprPAttackSword or objPlayer.sprite_index=sprPAttackAxe or objPlayer.sprite_index=sprPAttackMachete {
my_id.sprite_index=sprEBackSlashed 
audio_play_sound(choose(sndCut1,sndCut2),0,false) 
audio_play_sound(sndHit,0,false) 

my_id.image_index=floor(random(4))
if my_id.image_index=1 scrGoreCut(x,y,edir-180,1) else scrGoreCut(x,y,edir-180,0)
if my_id.image_index=0 {
part=instance_create(my_id.x+lengthdir_x(22,edir),my_id.y+lengthdir_y(18,edir),objBodyPart)
part.image_angle=edir-10+random(20)
part.direction=part.image_angle
part.speed=3+random(1)
}
if my_id.image_index=1 {
part=instance_create(my_id.x+lengthdir_x(12,edir),my_id.y+lengthdir_y(8,edir),objBodyPart)
part.image_angle=edir-10+random(20)
part.direction=part.image_angle
part.speed=3+random(1)
part.image_index=1
part.image_yscale=my_id.image_yscale
}
if my_id.image_index=2 {
part=instance_create(my_id.x+lengthdir_x(16,edir),my_id.y+lengthdir_y(12,edir),objBodyPart)
part.image_angle=edir-10+random(20)
part.direction=part.image_angle
part.speed=3+random(1)
part.image_index=2
part.image_yscale=my_id.image_yscale
}
}
}
my_id.direction=edir
my_id.speed=1.5+random(1)
my_id.image_angle=my_id.direction
if global.pigkill=1 my_id.sprite_index=sprOscarDead
global.pigkill=0
if my_id.sprite_index=sprEBackBlunt and round(random(11))=2 {
with my_id {
my_id=instance_create(x,y,objECrawl)
my_id.direction=direction
my_id.image_angle=direction
global.test=0
with my_id {if !place_free(x,y) {global.test=1 instance_destroy()}}
if global.test=0 instance_destroy()
}
}

if instance_exists(my_id) {
if my_id.sprite_index=sprEBackBlunt and round(random(24))=2 {
my_id.sprite_index=sprEBackCracked
my_id.image_index=0
}
}

if sprite_index=sprEWalkUnarmed or sprite_index=sprPoliceWalkUnarmed or sprite_index=sprEGiveUp or object_index=objDogPatrol noweapon=1 else noweapon=0
scrIdleGetEnemy()
if noweapon=0 {
my_id=instance_create(x,y,objWeaponThrow)
my_id.direction=other.direction-70+random(40)
my_id.speed=2+random(2)
my_id.image_index=scrCurrentWeaponExt(sprite_index)
my_id.ammo=ammo
}
instance_destroy()
}
}
}
x=lastx
y=lasty
}



if sprite_index=sprPAttackPunch or sprite_index=sprPAttackBag or sprite_index=sprPAttackDrill {
lastx=x
lasty=y
global.spacex=lengthdir_x(12,dir)
global.spacey=lengthdir_y(12,dir)
x+=global.spacex
y+=global.spacey


global.my_id=id
with objGlassPanelH {
if place_meeting(x,y,global.my_id) {
SteamIncStat("Windows",1)
if global.my_id.lasty&lt;y+2 {
add=-1
} else {
add=1
}
i=0
repeat (24) {
my_id=instance_create(x+i*1.5,y,objShard)
my_id.speed=random(5)
my_id.direction=add*90-8+random(16)
i+=1
}
instance_create(x,y,objGlassPanelHBroken)
global.shake=2
instance_destroy()
if !audio_is_playing(sndGlass1) and !audio_is_playing(sndGlass2) {
audio_play_sound(choose(sndGlass1,sndGlass2),0,false)
}
}
}

with objGlassPanelV {
if place_meeting(x,y,global.my_id) {
SteamIncStat("Windows",1)
if global.my_id.lastx&lt;x+2 {
add=-1
} else {
add=1
}
i=0
repeat (24) {
my_id=instance_create(x,y+i*1.5,objShard)
my_id.speed=random(5)
my_id.direction=90+add*90-8+random(16)
i+=1
}
instance_create(x,y,objGlassPanelVBroken)
global.shake=2
instance_destroy()
if !audio_is_playing(sndGlass1) and !audio_is_playing(sndGlass2) {
audio_play_sound(choose(sndGlass1,sndGlass2),0,false)
}
}
}

x+=lengthdir_x(12,dir)
y+=lengthdir_y(12,dir)

with objEnemy {
if scrCantGetHit(object_index) valid=0 else valid=1
if (place_meeting(x,y,objPlayer) or place_meeting(x+global.spacex,y+global.spacey,objPlayer)) and valid=1 {
mask_index=sprWeaponMask 
if scrCollisionLineExt(x,y,objPlayer.lastx,objPlayer.lasty,4,objSolid,objDoorV,objWallSoftH) {scrMoveSolidOff() mask_index=sprMask objPlayer.x=objPlayer.lastx objPlayer.y=objPlayer.lasty exit}
mask_index=sprMask
edir=point_direction(objPlayer.lastx,objPlayer.lasty,x,y)
audio_play_sound(sndDoorHit,0,false)
global.shake=3
my_id=instance_create(x,y,objKnockedOut)
my_id.type=object_index
if scrIsPolice(object_index) my_id.sprite_index=sprPoliceGetUp
my_id.direction=edir-10+random(20)
my_id.angle=my_id.direction
with my_id move_outside_solid(angle-180,16)
my_id.speed=3
scrIdleGetEnemy()
if sprite_index=sprEWalkUnarmed or sprite_index=sprPoliceWalkUnarmed noweapon=1 else noweapon=0
if noweapon=0 {
global.test=0
with objEnemy if alert=1 global.test+=1
my_id=instance_create(x,y-12,objScore)
my_id.text="+"+string(200+400*global.factor)+"pts"
global.myscore+=200+400*global.factor
global.boldscore+=200+400*global.factor
global.combotime+=100
global.killx[global.kills]=x
global.killy[global.kills]=y
global.kills+=1
my_id=instance_create(x,y,objWeaponThrow)
my_id.direction=direction-70+random(40)
my_id.image_index=scrCurrentWeaponExt(sprite_index)
my_id.speed=2+random(2)
my_id.ammo=ammo
}
instance_destroy()
}
}
x=lastx
y=lasty
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objEBullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.shake=10
with other {
if place_meeting(x,y,objSolid) {
move_outside_solid(direction-180,speed*2) 
if !place_meeting(x,y,objPlayer) exit
}
}
global.my_id=id
image_xscale=1.5
image_yscale=1.5
bullets=0
energie-=1
with objEBullet {
if place_meeting(x,y,global.my_id) {
my_id=instance_create(x,y,objBloodSmoke)
my_id.direction=direction-170+random(10)
my_id.speed=1
my_id.image_angle=my_id.direction
my_id.image_xscale=0.8+random(0.2)
my_id.image_yscale=my_id.image_xscale
instance_destroy()
global.my_id.bullets+=1
}
}
image_xscale=1
image_yscale=1
edir=other.direction
test=0
repeat (2*bullets) {
my_id=instance_create(x-3+random(6)+lengthdir_x(8,edir),y-3+random(6)+lengthdir_y(8,edir),objBloodDrop)
my_id.image_xscale=1-random(0.2)
my_id.image_yscale=my_id.image_xscale
my_id.image_angle=point_direction(x+lengthdir_x(8,edir),y+lengthdir_y(8,edir),my_id.x,my_id.y)
my_id.sprite_index=sprBloodSplatSmall
my_id.direction=my_id.image_angle
my_id.speed=2+random(4)
}
repeat (1+random(bullets)) {
my_id=instance_create(x-3+random(6)+lengthdir_x(8,edir),y-3+random(6)+lengthdir_y(8,edir),objBloodDrop)
my_id.image_xscale=1-random(0.2)
my_id.image_yscale=my_id.image_xscale
my_id.image_angle=point_direction(x+lengthdir_x(8,edir),y+lengthdir_y(8,edir),my_id.x,my_id.y)
my_id.direction=my_id.image_angle
my_id.speed=1+random(5)
}
repeat (bullets) {
my_id=instance_create(x-3+random(6)+lengthdir_x(16,edir),y-3+random(6)+lengthdir_y(16,edir),objBloodSmoke)
my_id.image_xscale=1.2-random(0.2)
my_id.image_yscale=my_id.image_xscale
my_id.image_angle=edir-20+random(40)
my_id.direction=my_id.image_angle
my_id.speed=2+random(1)
my_id.friction=0.15
}
if bullets&gt;1 or round(random(1)) or energie&lt;0 {
my_id=instance_create(x,y,objPlayerDead)
if bullets&gt;1 my_id.sprite_index=sprPBackShotgun else my_id.sprite_index=sprPBackMachinegun
my_id.image_index=1+floor(random(4))
my_id.direction=edir
my_id.speed=1.5+random(1)+bullets*0.15
my_id.image_angle=my_id.direction
my_id=instance_create(x+lengthdir_x(24,edir),y+lengthdir_y(24,edir),objMaskDrop)
my_id.direction=edir-40+random(80)
my_id.speed=1.5+random(1)
instance_destroy()
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="57">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox=1 exit</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>release</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>20</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>1</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>scrPlayerPickUp</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>release=0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="55">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(global.enemy) { global.enemy=-1234 exit}
lastx=x
lasty=y
x=global.mousex
y=global.mousey
image_xscale=2
image_yscale=2
if place_meeting(global.mousex,global.mousey,objEnemy) {

global.enemy=-1234
with objEnemy {
if place_meeting(x,y,objPlayer) global.enemy=id
}


}

if place_meeting(global.mousex,global.mousey,objEnemyIdle) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objEnemyIdle {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

if place_meeting(global.mousex,global.mousey,objEHideM16) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objEHideM16 {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

if place_meeting(global.mousex,global.mousey,objBoss) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objBoss {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

if place_meeting(global.mousex,global.mousey,objPanther) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objPanther {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

if place_meeting(global.mousex,global.mousey,objMiscEnemy) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objMiscEnemy {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

x=lastx
y=lasty

image_xscale=1
image_yscale=1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="51">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox=1 exit
if release&lt;20 release+=1 else scrPlayerPickUp2()</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="50">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox=1 exit
if room=rmHotelSuite {
with objWindowV {
if x=480 {
if y=256 {
if sprite_index=sprWindowSill nothing=1 else {
if place_meeting(x-16,y,objPlayer) {
with objPlayer {
if sprite_index=sprPWalkUnarmed nothing=1 else {
my_id=instance_create(objPlayer.x+lengthdir_x(8,objPlayer.dir-90),objPlayer.y+lengthdir_y(8,objPlayer.dir-90),objWeaponThrow)
my_id.image_index=scrCurrentWeaponExt(sprite_index)
my_id.direction=dir-70-random(40)
my_id.speed=1+random(2)
my_id.ammo=ammo
sprite_index=sprPWalkUnarmed
}
instance_destroy()
}
my_id=instance_create(x-6,y+16,objPlayerOpenWindow)
my_id.sprite_index=sprPClimbWindow
my_id.image_angle=0
with my_id {scrInitMaskPos() scrUpdateMaskPos(sprite_index)}
sprite_index=sprWindowSill
image_index=1
my_id=instance_create(x+6,y,objWindowOpen)
my_id.image_xscale=-1
reload=2
exit
}
}
}
}
}
}</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>scrPlayerShoot</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>scrPlayerAnimationEnd</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if persistent=1 {

if move=1 {
move=0
x+=movex
y+=movey
xview+=movex
yview+=movey
}

//view_xview[0]=xview
//view_yview[0]=yview
}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(objEnemy) clear=0 else clear=1
if room=rmTutorial clear=1
if global.paused=1 { exit}
if !instance_exists(objEffector) instance_create(x,y,objEffector)
if !instance_exists(objBackgroundColor) instance_create(x,y,objBackgroundColor)
if !instance_exists(objSurfacer) instance_create(x,y,objSurfacer)
if persistent=1 {
/*if instance_exists(objElevator) {
vdist=point_distance(x,y,room_width/2,room_height/2)
vdir=point_direction(room_width/2,room_height/2,x,y)
view_xview[0]=x+lengthdir_x(vdist*0.2,vdir-180)-view_wview[0]*0.5
view_yview[0]=y+lengthdir_y(vdist*0.2,vdir-180)-view_hview[0]*0.5
view_angle[0]=lengthdir_y(vdist*(1/160),vdir*2)
} else {*/
view_xview[0]=xview
view_yview[0]=yview
with objEffector {
vlastx=view_xview[0]
vlasty=view_yview[0]
}
//}
alarm[0]=36

}
else {
vdist=point_distance(x,y,room_width/2,room_height/2)
vdir=point_direction(room_width/2,room_height/2,x,y)
view_xview[0]=x+lengthdir_x(vdist*0.2,vdir-180)-view_wview[0]*0.5
view_yview[0]=y+lengthdir_y(vdist*0.2,vdir-180)-view_hview[0]*0.5
view_angle[0]=lengthdir_y(vdist*(1/160),vdir*2)
with objEffector {
vlastx=view_xview[0]
vlasty=view_yview[0]
}
/*
viewx=objPlayer.x+(display_mouse_get_x()-display_get_width()*0.5)*(view_wview[0]/display_get_width())-view_wview[0]/2
viewy=objPlayer.y+(display_mouse_get_y()-display_get_height()*0.5)*(view_hview[0]/display_get_height())-view_hview[0]/2
view_xview[0]=viewx
view_yview[0]=viewy*/
}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if persistent=1 exit
if sprite_index=last_sprite nothing=1 else {
scrUpdateMaskPos(sprite_index)
last_sprite=sprite_index
}
if myspeed=2.25 legsprite=sprLegsStairs else legsprite=sprLegs
draw_set_blend_mode(bm_add)
draw_circle_color(x,y,48+random(6)+light,make_color_hsv(0,0,30+light*2),c_black,0)
draw_set_blend_mode(bm_normal)
draw_sprite_ext(legsprite,legindex,x+1,y+1,image_xscale,image_yscale,legdir,c_black,0.5)
draw_sprite_ext(sprite_index,image_index,x+1,y+1,image_xscale,image_yscale*left,dir,c_black,0.5)
draw_sprite_ext(legsprite,legindex,x,y,image_xscale,image_yscale,legdir,image_blend,image_alpha)
if global.xbox=1 dir=scrXboxPlayerLook() else dir=point_direction(x,y,global.mousex,global.mousey)
if sprite_index=sprPLeaveBag {
dir=point_direction(x,y,objDumpster.x+20,objDumpster.y+12)
}
draw_sprite_ext(sprite_index,image_index,x,y,image_xscale,image_yscale*left,dir,image_blend,image_alpha)
if reload&gt;0 reload-=1
if light&gt;3 light-=3
if sprite_index=sprPWalkThrow {
left=1
draw_sprite_ext(sprThrowWeapons,throwindex,x+lengthdir_x(throwadd[floor(image_index)],dir)+lengthdir_x(7,dir-90)+1,y+1+lengthdir_y(throwadd[floor(image_index)],dir)+lengthdir_y(7,dir-90),image_xscale,image_yscale,dir+lengthdir_x(20,360*(image_index*(1/8))),c_black,0.5)
draw_sprite_ext(sprThrowWeapons,throwindex,x+lengthdir_x(throwadd[floor(image_index)],dir)+lengthdir_x(7,dir-90),y+lengthdir_y(throwadd[floor(image_index)],dir)+lengthdir_y(7,dir-90),image_xscale,image_yscale,dir+lengthdir_x(20,360*(image_index*(1/8))),image_blend,image_alpha)
}
if sprite_index=sprPMaskSlip {
draw_sprite_ext(masksprite,image_index,x,y,image_xscale,image_yscale*left,dir,image_blend,image_alpha)
}
if maskon=1 scrDrawMask(0)</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="80">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>exit
sprite_index=sprPWalkPipe</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="67">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>exit
if keyboard_check(vk_shift) {
with objEnemy instance_destroy()
}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="32">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>scrKillShield</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="17">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>aim=!aim</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="16">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_perform(ev_keypress,vk_control)</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
