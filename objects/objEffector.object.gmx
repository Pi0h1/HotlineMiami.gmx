<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprCursor</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-10000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>window_set_cursor(cr_none);
display_set_gui_size(view_wview, view_hview);
eraser_index=0
alpha = 1
coldir = 0
amount = 0
fade = 0
my_y = 0
global.dir = 0
restart = 0
update = 0
dir = 0
ammoy = -32
next = 0
showfinished = 0
cursor_speed = 0.4 // sets the speed of the cursor animation
action = 0
wait = 0
phonex = 0
global.loaded = 0
nextroom = room_next(room)
newsong = 0
song = -1
show_date = 0
blackx = 0
bamount = 0
width = display_get_width()
height = display_get_height()
global.mousex = (display_mouse_get_x()-width*0.5)*(view_wview[0]/width)
global.mousey = (display_mouse_get_y()-height*0.5)*(view_hview[0]/height)
vlastx = view_xview[0]
vlasty = view_yview[0]
global.enemy = -1234
leveltitle = ""
levelshow = 240
gridon = 0
uzisnd = 0
if instance_exists(objMaskMenu) {
    switch global.sequence {
        case rmSequence1:   leveltitle="Brickell Metro Station";    break;
        case rmSequence2:   leveltitle="East 7th St";               break;
        case rmSequence3:   leveltitle="North West 184th St";       break;
        case rmSequence4:   leveltitle="South West 53rd Place";     break;
        case rmSequence5:   leveltitle="North West 24th St";        break;
        case rmSequence6:   leveltitle="South West 104th St";       break;
        case rmSequence7:   leveltitle="North West 151st Place";    break;
        case rmSequence8:   leveltitle="South East 122nd St";       break;
        case rmSequence9:   leveltitle="North East 165th";          break;
        case rmSequence10:  leveltitle="North East 24th St";        break;
        case rmSequence11:  leveltitle="East 7th St";               break;
        case rmSequence12:  leveltitle="South East 24th St";        break;
        case rmSequence13:  leveltitle="West 25th St";              break;
        case rmSequence14:  leveltitle="South 86th St";             break;
        default:            leveltitle="";
    }
}

if instance_exists(objPlayerBiker) {
    switch room {
    case rmNoodleShop:              leveltitle="North East 56th St";        break;
    case rmArcadeDownstairs:        leveltitle="South West 107th Place";    break;
    case rmPhoneHomEntranceBiker:   leveltitle="North West 342nd St";       break;
    case rmJanitors:                leveltitle="North 87th Place";          break;
    }
}

if global.devmode {
    leveltitle = "Currently on " + room_get_name(room);
}
// Cutscenes
sprite = sprFacePhone

// Dates
if room = rmSequence1
or room = rmSequence2
or room = rmSequence3
or room = rmSequence4
or room = rmSequence5
or room = rmSequence6
or room = rmSequence7
or room = rmSequence8
or room = rmSequence9
or room = rmSequence10
or room = rmSequence11
or room = rmSequence12
or room = rmSequence14
or room = rmHospitalTopFloor
or room = rmMCBar
or room = rmMCSequence2
or room = rmMCSequence3
or room = rmMCSequence4 {
    scrShowDate(room)
    start = 1;
} else {
    start = 0;
}

if room = rmSequence13Downstairs {
    start = 1;
}
lastbrus=0
brus=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_speed = (cursor_speed)*delta

if uzisnd=1 {uzisnd=0PlaySFX(sndUzi)}
if keyboard_check_pressed(ord(global.restartkey)) event_perform(ev_keypress,ord('R'))
SteamRunCallbacks()
if global.maskload=1 {
scrLoadMask()
global.maskload=0
with objPlayer scrGetMaskPowers()
}
if global.loaded=1 {
scrLoadAchievements()
if room=rmSwatUpstairs {
audio_stop_sound(sndPolice)
if file_exists(working_directory+"\restartmusic") {
sxeasy_play(working_directory+"\Crystals.mp3")
sxeasy_setVolume(1)
file_delete(working_directory+"\restartmusic")
scrCheckpoint()
}
}
scrLoadBonusList()
with objSurfacer {
scrSurfaceTiles()
}
with objWeapon {
if object_index=objSpecificWeapon nothing=1 else {
instance_create(x,y,objWeapon)
instance_destroy()
}
}
leveltitle=""
levelshow=120
global.loaded=0
//scrSaveTiles()
if global.maskindex=9 objPlayer.energie=1
if global.maskindex=21 objPlayer.energie=2
}
scrCheckMissionComplete()
if fade=0 {
if amount&lt;180 {
amount+=5
}
}
if fade=1 {
if amount&gt;0  {
amount-=10
if restart=1 or newsong=1 or (room=rmSwatUpstairs and instance_exists(objSwat) and (instance_exists(objDeadBody) and objDeadBody.isPlayer=true)) {
sxeasy_setVolume(amount*(1/180))
}
} else {fade=0 if restart=1 {if file_exists(working_directory+"\restartmusic") file_delete(working_directory+"\restartmusic") sxeasy_stop(1) sxeasy_setVolume(0) bgm_Close() game_restart() //sxeasy_play(working_directory+"\HorseSteppin.mp3"); room=rmMenu
} else {if next=1 {if file_exists(working_directory+"\restartmusic") file_delete(working_directory+"\restartmusic") if newsong=1 {sxeasy_stop(1) sxeasy_setVolume(0) sxeasy_play(song);} room=nextroom} else {if room=rmSwatUpstairs and file_exists(working_directory+"\restartmusic") {sxeasy_stop(1) bgm_Unload(global.currentsong)} scrRestart();}}}
}
vlastx=view_xview[0]
vlasty=view_yview[0]
if global.shake&gt;0 {
global.shake-=0.5
//view_xview[0]+=-global.shake*0.33+random(global.shake*0.66)
//view_yview[0]+=-global.shake*0.33+random(global.shake*0.66)
if global.devmode=0{
view_angle[0]+=-global.shake*0.33+random(global.shake*0.66)
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="57">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.devmode=0 exit

if keyboard_check(vk_control){

var inst = noone
var dis = 8
with all {
  var mydis = point_distance( x, y, other.x, other.y )

if id!=other.id &amp;&amp; mydis &lt; dis {
    dis = mydis   
    inst = id
  }
}
instance_destroy(inst)

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>exit
repeat (18) {
my_id=instance_create(mouse_x,mouse_y,objBloodDrop)
my_id.speed=2+random(1)
my_id.direction=random(360)
my_id.image_angle=my_id.direction
}

repeat (6) {
my_id=instance_create(mouse_x-2+random(4),mouse_y-2+random(4),objBloodSmoke)
my_id.speed=2+random(1)
my_id.direction=point_direction(mouse_x,mouse_y,my_id.x,my_id.y)
my_id.image_angle=my_id.direction
}

dir=random(360)
repeat (12) {
my_id=instance_create(mouse_x-1+random(2),mouse_y-1+random(2),objBloodHit)
my_id.speed=1+random(2)
my_id.friction=0.2
my_id.direction=dir-45+random(90)
my_id.image_angle=my_id.direction
}

repeat (2+round(random(2))) {
instance_create(mouse_x-7+random(14),mouse_y-7+random(14),objBloodSplat)
}

type=choose(0,1,2,3)
if type=0 {
repeat (6) {
my_id=instance_create(mouse_x-2+random(4),mouse_y-2+random(4),objBrains)
my_id.speed=2+random(1)
my_id.direction=point_direction(mouse_x,mouse_y,my_id.x,my_id.y)
my_id.image_angle=my_id.direction
}
} 
if type=1 {
repeat (1+round(random(1))) {
my_id=instance_create(mouse_x,mouse_y,objBrainChunk2)
my_id.speed=1+random(0.5)
my_id.direction=dir-10+random(20)
my_id.image_angle=my_id.direction
}
}

if type=2 {
repeat (5) {
my_id=instance_create(mouse_x,mouse_y,objSkinPiece2)
my_id.speed=1+random(1)
my_id.direction=random(360)
my_id.image_angle=my_id.direction
}
}

if type=3 {
repeat (8) {
my_id=instance_create(mouse_x,mouse_y,objGuts2)
my_id.speed=1+random(1)
my_id.direction=direction-160-random(40)
my_id.image_angle=my_id.direction
}
}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.depthDeath=0 // Reset the global.depth for dead bodies to prevent them from starting to pile up on top of stuff like furniture.

if !instance_exists(objShadowManager){
instance_create(x,y,objShadowManager)
}

if !instance_exists(objSurfaceManager){
instance_create(x,y,objSurfaceManager)
}

if !instance_exists(objSurfaceChecker){
instance_create(x,y,objSurfaceChecker)
}


if !instance_exists(objMaskMenu) {if global.maskindex=14 bamount=1}
scrSaveBonusList()
i=0
room_set_persistent(room,true)
room_persistent=true
if global.paused=0 {scrInitPathFinding() if !instance_exists(objMaskMenu) scrCheckpoint()} else global.paused=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>display_set_gui_size(view_wview, view_hview);
if global.cutscene=0{
scrGameplay();
}else{
scrCutscene();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if action&gt;0 {image_blend=merge_color(merge_color(c_aqua,c_fuchsia,0.5+lengthdir_x(0.5,global.dir*3.27)),c_white,0.5+lengthdir_y(0.5,global.dir*1.97))
draw_sprite_ext(sprCursorAction,action-1,global.mousex+1,global.mousey+1,1,1,-view_angle[0],c_black,0.5)
draw_sprite_ext(sprCursorAction,action-1,global.mousex,global.mousey,1,1,-view_angle[0],image_blend,1)
}
//Actually draws the cursor
draw_sprite_ext(sprite_index,image_index,global.mousex+1,global.mousey+1,1,1,-view_angle[0],c_black,0.5)
draw_set_blend_mode(bm_add)
draw_sprite_ext(sprite_index,image_index,global.mousex,global.mousey,1,1,-view_angle[0],c_white,1)
draw_set_blend_mode(bm_normal)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="82">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(objPlayer) nothing=1 else {scrSaveAchievements() fade=1 next=0}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="49">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>exit
gridon=!gridon
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if fade=0 and amount=180 {
if instance_exists(objPlayer) {
if objPlayer.persistent=1 objPlayer.persistent=0
}
global.lastroom=room
room_persistent=1
screen_save(working_directory+"\pause.bmp")
global.sprite=sprite_add(working_directory+"\pause.bmp",0,0,0,0,1)
room=rmPause
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
