<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.barehanded=1 and scrGetCurrentLevel()=5 SteamSetAchievement("ACH_THESE_ARE_MY_GUNS")
scrSaveAchievements()
scrCheckGuns()
if global.xbox=1 scrInitXboxButtons()
scrCountFlexibilityScore()
scrCountMobilityScore()
scrCheckLetters()
scrCheckUsedGuns()
scrCheckUsedMasks()
scrCheckUsedThrows()
scrCheckUsedKills()
SteamCheckFinal()
song=working_directory+"\Daisuke.mp3"
//if global.sequence=rmSequence4 or global.sequence=rmSequence8 song=-1//working_directory+"\SilverLights.mp3"
global.myscore=0
bonus[0]=global.killscore
bonus[1]=global.boldscore
bonus[2]=global.comboscore
bonus[3]=floor((18000-global.time)*0.5)
if bonus[3]&lt;0 bonus[3]=0
bonus[4]=global.flexibilityscore
bonus[5]=global.mobilityscore
bonus[6]=global.specialscore
i=0
fastforward=0
repeat (7) {
drawbonus[i]=0
amount[i]=0
global.myscore+=bonus[i]
i+=1
}
global.levelscore[global.currentlevel]=global.myscore
parscore="/"+string(round((scrGetMaxpoints()*(7/15))*(1/500))*500)+"pts"
type[0]="KILLINGS:"
type[1]="BOLDNESS:"
type[2]="COMBOS:"
type[3]="TIME BONUS:"
type[4]="FLEXIBILITY:"
type[5]="MOBILITY:"
type[6]="SPECIAL:"
global.totalscore+=global.myscore
global.newguns=0
allguns=0
i=0
while global.newgun[i]=1 and i&lt;15 {
i+=1
}
if global.totalscore&gt;(i+1)*50000 and global.totalscore-global.myscore&lt;(i+1)*50000 global.newguns=1
i+=1
if global.totalscore&gt;(i+1)*50000 and global.totalscore-global.myscore&lt;(i+1)*50000 global.newguns=2 else i-=1
nextgun=(i+1)*50000
leftgun=global.totalscore
//while leftgun&gt;50000 leftgun-=50000
i=0 
while global.newgun[i]=1 and i&lt;16 {
i+=1
}
if i=15 and global.newguns=2 global.newguns=1
if i=16 {allguns=1 global.newguns=0}
current=0
dir=random(360)
factor=0
fade=0
c_amount=0

global.surf1=surface_create(room_width,room_height)
surface_set_target(global.surf1)
draw_clear_alpha(c_black,0)
surface_reset_target()


repeat (5) instance_create(random(room_width),0,objHouseReturn)

i=0
repeat (5) {
palmx[i]=(room_width/4)*i
palmindex[i]=floor(random(6))
i+=1
}

global.currentmask=0
if global.sequence=rmSequence1 global.currentmask=1
if global.sequence=rmSequence2 global.currentmask=2
if global.sequence=rmSequence3 global.currentmask=3
if global.sequence=rmSequence4 global.currentmask=4
if global.sequence=rmSequence5 global.currentmask=5
if global.sequence=rmSequence6 global.currentmask=6
if global.sequence=rmSequence7 global.currentmask=7
if global.sequence=rmSequence8 global.currentmask=8
if global.sequence=rmSequence9 global.currentmask=9
if global.sequence=rmSequence10 global.currentmask=10
if global.sequence=rmSequence11 global.currentmask=11
if global.sequence=rmSequence12 global.currentmask=12
if global.sequence=rmSequence13 global.currentmask=13
if global.sequence=rmSequence14 global.currentmask=14
if global.sequence=rmMCBar global.currentmask=15
if global.sequence=rmMCSequence2 global.currentmask=16
if global.sequence=rmMCSequence3 global.currentmask=17



/*-Combos = Combo Bonus
-Total time = Time Bonus
-Weapons used = Flexibility Bonus
-Distance between kills = Mobility Bonus
-Only melee bonus = Melee Bonus
-Shots fired during combat = Artillery Bonus
-People who see you kill someone = Boldness Bonus*/</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox=1 {
fastforward=0
if checkbutton(0,getid(5)) {
if presstart=0 {
presstart=1
scrXboxScoreStatsStart()
} else {fastforward=1}
} else presstart=0
} else {
fastforward=mouse_check_button(mb_left)
}

SteamRunCallbacks()
if !surface_exists(global.surf1) {
global.surf1=surface_create(room_width,room_height)
surface_set_target(global.surf1)
draw_clear_alpha(c_black,0)
surface_reset_target()
}

surface_set_target(global.surf1)
draw_clear_alpha(c_black,0)
draw_set_font(fntPointShow)
draw_set_halign(fa_center)
draw_set_valign(fa_center)
i=0
repeat (6) {
start_x=60+string_width(type[i])*0.5
if i&lt;current+1 {
ii=0
repeat (1+abs(lengthdir_y(15,amount[i]))) {
draw_set_color(merge_color(merge_color(c_purple,c_fuchsia,0.5-lengthdir_y(0.5,dir*8+i*25)),merge_color(c_white,c_yellow,0.25-lengthdir_y(0.25,dir*12+i*25)),0.5-lengthdir_x(0.5,ii*(180/16))))
dist=((64+i*16)-(room_height/2))*0.25
draw_text_transformed(start_x,64+i*16-lengthdir_y(dist,45-lengthdir_x(45,ii*(180/16))),type[i],1+abs(lengthdir_y(0.25,45-lengthdir_x(45,ii*(180/16)))),1+abs(lengthdir_y(1,45-lengthdir_x(45,ii*(180/16)))),0)
ii+=1
}
if amount[i]&lt;180 amount[i]+=4+fastforward*6 else {
if fastforward drawbonus[i]=bonus[i]
if drawbonus[i]&lt;bonus[i]-200 drawbonus[i]+=100 else {
if drawbonus[i]&lt;bonus[i]-100 drawbonus[i]+=10 else {
if drawbonus[i]&lt;bonus[i]-5 drawbonus[i]+=5 else drawbonus[i]=bonus[i]
}
}
draw_set_halign(fa_right)
draw_set_color(merge_color(c_teal,c_black,0.35+lengthdir_x(0.35,dir*24)))
draw_text_transformed(334,64+i*16,string(drawbonus[i]),1,1,0)
draw_set_color(merge_color(c_aqua,c_teal,0.35+lengthdir_x(0.35,dir*24)))
draw_text_transformed(332,64+i*16,string(drawbonus[i]),1,1,0)
draw_set_color(c_white)
draw_text_transformed(330,64+i*16,string(drawbonus[i]),1,1,0)
draw_set_halign(fa_center)
if current=i and drawbonus[i]=bonus[i] current+=1
}
}
i+=1
}
if drawbonus[5]=bonus[5] {
if factor&lt;1 factor+=0.025
draw_set_halign(fa_center)
draw_set_font(fntChapter)
i=0 
times=lengthdir_x(11,dir*15)
if times&lt;1 times=1
if global.myscore&lt;real(string_digits(parscore)) color1=c_red else color1=c_lime
repeat (times) {
draw_set_color(merge_color(color1,c_white,0.5-lengthdir_x(0.5,i*16)))
draw_text_transformed(200,view_hview[0]-64,string(global.myscore)+parscore,0.65+i*0.005,1+i*0.05,lengthdir_x(4,dir*8))
i+=1
}
}
surface_reset_target()</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox=1 exit
if factor&lt;1 exit
fade=1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>dir+=0.25
color2=make_color_hsv(0,255,15)
color1=merge_color(c_yellow,merge_color(merge_color(c_fuchsia,c_red,0.5+lengthdir_x(0.5,dir*3.12)),c_maroon,0.125+lengthdir_y(0.125,dir*1.73)),0.5+lengthdir_y(0.5,dir*1.73))
d3d_set_projection_ortho(0,0,view_wview[0],view_hview[0],0)
draw_rectangle_color(view_xview[0],view_yview[0]+40,view_xview[0]+view_wview[0],view_yview[0]+view_hview[0]-40,color2,color2,color1,color1,0)
draw_set_blend_mode(bm_subtract)
draw_rectangle_color(view_xview[0],view_hview[0]-39,view_xview[0]+view_wview[0],view_yview[0]+view_hview[0]-50,c_black,c_black,c_white,c_white,0)
draw_set_blend_mode(bm_normal)
with objHouseReturn draw_sprite_ext(sprite_index,image_index,x,y,image_xscale,image_yscale,image_angle,image_blend,image_alpha)
i=0
repeat (5) {
draw_sprite_ext(sprPalmTrees,palmindex[i],palmx[i],room_height+65,1,1,0,c_black,1)
palmx[i]+=8
if palmx[i]&gt;=room_width+60 {palmx[i]=-60 palmindex[i]=floor(random(6))}
i+=1
}

if factor&gt;0 {
draw_set_blend_mode(bm_subtract)
i=0 
repeat (9) {
color1=merge_color(c_black,c_white,0.5+lengthdir_x(0.4,180-factor*180)+lengthdir_x(0.1,dir*16+i*90))
draw_rectangle_color(100+lengthdir_x(32,dir*16+i*90)*factor,view_hview[0]-79+i*5,view_wview[0],view_hview[0]-79+i*5-3,c_black,color1,color1,c_black,0)
i+=1
}
draw_set_blend_mode(bm_normal)
draw_set_halign(fa_center)
draw_set_valign(fa_top)
draw_set_font(fntDate)
text=string(nextgun-leftgun)+' POINTS UNTIL NEXT WEAPON UNLOCK'
if global.newguns&gt;0 text="NEW WEAPON UNLOCKED!"
if allguns=1 text='' else {
draw_set_color(merge_color(c_yellow,c_orange,0.5+lengthdir_x(0.5,dir*5)))
draw_text(view_wview[0]/2,view_hview[0]-24,text)
draw_set_color(merge_color(c_orange,c_yellow,0.5+lengthdir_x(0.5,dir*5)))
draw_text(view_wview[0]/2+1,view_hview[0]-24+1,text)
}
}

d3d_set_projection_ortho(0,0,view_wview[0],view_hview[0],view_angle[0])


if surface_exists(global.surf1) {
draw_surface_ext(global.surf1,-1,0,1,1,0,c_black,1)
draw_surface_ext(global.surf1,1,0,1,1,0,c_black,1)
draw_surface_ext(global.surf1,0,-1,1,1,0,c_black,1)
draw_surface_ext(global.surf1,0,1,1,1,0,c_black,1)
draw_surface_ext(global.surf1,0,0,1,1,0,c_white,1)
}
d3d_set_projection_ortho(0,0,view_wview[0],view_hview[0],0)
view_angle[0]=lengthdir_y(2,dir*2.33)
if fade=0 {
if c_amount&lt;180 {
c_amount+=10
color1=merge_color(c_black,merge_color(c_aqua,c_white,0.5+lengthdir_x(0.5,c_amount)),0.5+lengthdir_x(0.5,c_amount))
if c_amount&gt;90 color2=merge_color(c_black,merge_color(c_fuchsia,c_white,abs(lengthdir_y(1,c_amount))),abs(lengthdir_y(1,c_amount))) else color2=c_white
draw_set_blend_mode(bm_subtract)
draw_rectangle_color(view_xview[0]-10,view_yview[0]-10,view_xview[0]+view_wview[0]+10,view_yview[0]+view_hview[0]+10,color1,color2,color2,color1,0)
draw_set_blend_mode(bm_normal)
}
}

if fade=1 {
if c_amount&gt;0  {
c_amount-=5
color1=merge_color(c_black,merge_color(c_aqua,c_white,0.5+lengthdir_x(0.5,c_amount)),0.5+lengthdir_x(0.5,c_amount))
if c_amount&gt;90 color2=merge_color(c_black,merge_color(c_fuchsia,c_white,abs(lengthdir_y(1,c_amount))),abs(lengthdir_y(1,c_amount))) else color2=c_white
draw_set_blend_mode(bm_subtract)
draw_rectangle_color(view_xview[0]-10,view_yview[0]-10,view_xview[0]+view_wview[0]+10,view_yview[0]+view_hview[0]+10,color2,color1,color1,color2,0)
draw_set_blend_mode(bm_normal)
} else {
next=rmScoreDetails 
room_goto(next)
}

}



d3d_set_projection_ortho(0,0,view_wview[0],view_hview[0],0)
draw_set_color(c_black)
//draw_rectangle(0,0,room_width,55,0)
//draw_rectangle(0,room_height,room_width,room_height-65,0)
draw_set_blend_mode(bm_subtract)
my_y=random(32)
draw_sprite_tiled(sprScanlines,0,0,my_y)
draw_set_blend_mode(bm_subtract)
draw_circle_color(view_wview[0]/2,view_hview[0]/2,240+random(24),c_black,merge_color(c_navy,c_aqua,0.25+random(0.25)),0)
draw_set_blend_mode(bm_normal)</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
