<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>Player_Jacket</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-2</depth>
  <persistent>0</persistent>
  <parentName>objPlayer</parentName>
  <maskName>sprMask</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Initialize object
if !instance_exists(objEffector){instance_create(x,y,objEffector)}
scrInitPlayer();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Load character sprites
charJacket();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Vomit
if !place_meeting(x,y,objPlayerCar)
    {
    my_id = instance_create(x, y, objPVomit);
    my_id.image_angle = dir;
    instance_destroy();
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Logic
playerEffects();
checkAreaClear();
keyLookFurther = keyboard_check_direct(vk_shift);
isLookingFuther = keyLookFurther;

global.test = 0;

with objWeapon {
  if point_distance(x, y, objPlayer.x, objPlayer.y) &lt; 32 {
    global.test = 2; 
  }
}

if place_meeting(x, y, objKnockedOut) global.test = 1;

objEffector.action = global.test;

if throwreload &gt; 0 throwreload -= 1;

gameplayCamera();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Movement

if global.maskindex=5               {playerSpeed = 3.5} // Graham mask
if global.maskindex=16              {playerSpeed = 4} // Brandon mask
if global.maskindex=20              {playerMoveScale=-1} // Nigel mask
if sprite_index=sprPWalkHospital    {playerSpeed = 1.5}
if sprite_index=sprPWalkGirlfriend  {playerSpeed = 1.5}

scrPlayerMove(playerSpeed,playerFactor,playerMoveScale);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Attacking (Melee)
if scrIsSwinging(sprite_index) {            // If the player swings a melee weapon:
    lastx = x;                              // - Store initial player position.
    lasty = y;
    global.spacex = lengthdir_x(12, dir);   // - Set the distance the player is going to move.
    global.spacey = lengthdir_y(12, dir);
    x += global.spacex;                     // - Move forward to attack.
    y += global.spacey;
    global.my_id = id;
    scrDestroyWindowH("Melee");             // - At this distance destroy windows.
    scrDestroyWindowV("Melee");
    x += global.spacex;                     // - Move even further.
    y += global.spacey;
    if scrIsLethal(sprite_index) {          // - At this distance attack the enemy.
        scrKillEnemy();
    } else {
        scrKnockEnemyOut();
    }
    x = lastx;                              // - Immediately, before any of this can be rendered, move the player back to the initial position.
    y = lasty;
}                                           // And that's how Hotline Miami handles the attack collision.

if keyboard_check_pressed(vk_space){        // Executing an enemy.
    scrKillShield();
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Collision with Bullets
bulletCollision(Death_Machinegun,Death_Shotgun);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="55">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Lock-on
if instance_exists(global.enemy) { global.enemy=-1234 exit}
lastx=x
lasty=y
x=global.mousex
y=global.mousey
image_xscale=2
image_yscale=2
if place_meeting(global.mousex,global.mousey,objEnemy) {

global.enemy=-1234
with objEnemy {
if place_meeting(x,y,objPlayer) global.enemy=id
}


}

if place_meeting(global.mousex,global.mousey,objEnemyIdle) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objEnemyIdle {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

if place_meeting(global.mousex,global.mousey,objEHideM16) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objEHideM16 {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

if place_meeting(global.mousex,global.mousey,objBoss) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objBoss {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

if place_meeting(global.mousex,global.mousey,objPanther) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objPanther {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

if place_meeting(global.mousex,global.mousey,objMiscEnemy) {
x=global.mousex
y=global.mousey
global.enemy=-1234
with objMiscEnemy {
if place_meeting(x,y,objPlayer) global.enemy=id
}
}

x=lastx
y=lasty

image_xscale=1
image_yscale=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="54">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Throw Weapon
if !keyboard_check(vk_alt){
    if release&lt;20{
        scrPlayerPickUp();
        release=0;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Interact
if instance_exists(objPhoneConversation) exit
if place_meeting(x+lengthdir_x(10,dir),y+lengthdir_y(10,dir),objSecretMask) or place_meeting(x,y,objSecretMask) {
with objSecretMask {
global.masks[image_index]=1
global.newmask[global.newmasks]=image_index
global.newmasks+=1
PlaySFX(sndToken)
my_id=instance_create(x,y,objLetterFound)
my_id.text='"'+scrMaskGetName(image_index)+'"'
instance_destroy()
}
scrCheckMasks()
exit
}


if place_meeting(x+lengthdir_x(12,dir),y+lengthdir_y(12,dir),objAnsweringMachine) {
if objAnsweringMachine.active=1 {
scrGetMessage(objAnsweringMachine)
sprite_index=sprPTakePhone
image_index=0
PlaySFX(sndPhone)
}
}

if place_meeting(x+lengthdir_x(12,dir),y+lengthdir_y(12,dir),objBox) {
if objBox.sprite_index=sprBox {
objBox.sprite_index=sprBoxOpen
objBox.image_index=1
PlaySFX(sndBox)
} else {
with objBox {
PlaySFX("Pick Up")
scrGetMessage(objOpenedBox)
my_id=instance_create(x,y,objOpenedBox)
my_id.image_angle=image_angle
instance_destroy()
global.package=1
global.done=1
}
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="51">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Drop Weapon
if keyboard_check(vk_alt){
    if release&lt;20 release+=1 else scrPlayerPickUp2()
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="50">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Attack
if room=rmHotelSuite {
with objWindowFrameV {
if x=480 {
if y=256 {
if sprite_index=sprWindowSill nothing=1 else {
if place_meeting(x-16,y,objPlayer) {
with objPlayer {
if sprite_index=sprPWalkUnarmed nothing=1 else {
my_id=instance_create(objPlayer.x+lengthdir_x(8,objPlayer.dir-90),objPlayer.y+lengthdir_y(8,objPlayer.dir-90),objWeaponThrow)
my_id.image_index=scrCurrentWeaponExt(sprite_index)
my_id.direction=dir-70-random(40)
my_id.speed=1+random(2)
my_id.ammo=ammo
sprite_index=sprPWalkUnarmed
}
instance_destroy()
}
my_id=instance_create(x-6,y+16,objPlayerOpenWindow)
my_id.sprite_index=sprPClimbWindow
my_id.image_angle=0
with my_id {scrInitMaskPos() scrUpdateMaskPos(sprite_index)}
sprite_index=sprWindowSill
image_index=1
my_id=instance_create(x+6,y,objWindowOpen)
my_id.image_xscale=-1
reload=2
exit
}
}
}
}
}
}
scrPlayerAttack();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>scrPlayerAnimationEnd</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if persistent=1 {
    if move=1 {
        move=0
        x+=movex
        y+=movey
        xview+=movex
        yview+=movey
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(objEnemy) clear = 0 else clear = 1
if room=rmTutorial clear = 1
if global.paused=1 { exit}
if !instance_exists(objEffector) instance_create(x,y,objEffector)
//if !instance_exists(objBackgroundColor) instance_create(x,y,objBackgroundColor)
if !instance_exists(objSurfacer) instance_create(x,y,objSurfacer)
if persistent=1 {
view_xview[0]=xview
view_yview[0]=yview
with objEffector {
vlastx=view_xview[0]
vlasty=view_yview[0]
}
alarm[0]=36
alarm[1]=2000

}
else {
vdist=point_distance(x,y,room_width/2,room_height/2)
vdir=point_direction(room_width/2,room_height/2,x,y)
view_xview[0]=x+lengthdir_x(vdist*0.2,vdir-180)-view_wview[0]*0.5
view_yview[0]=y+lengthdir_y(vdist*0.2,vdir-180)-view_hview[0]*0.5
if global.devmode=0{
view_angle[0]=lengthdir_y(vdist*(1/160),vdir*2)
}
with objEffector {
vlastx=view_xview[0]
vlasty=view_yview[0]
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if sprite_index=sprPTakePhone {
    if !instance_exists(objPhoneConversation) sprite_index=sprPWalkUnarmed else {
    if image_index&lt;3 image_index+=0.15
    }
}

if persistent=1 exit
if sprite_index=last_sprite nothing=1 else {
scrUpdateMaskPos(sprite_index)
last_sprite=sprite_index
}

scrPlayerLight();

dir=point_direction(x,y,global.mousex,global.mousey)

if sprite_index=sprPLeaveBag {
dir=point_direction(x,y,objDumpster.x+20,objDumpster.y+12)
}

scrDrawPose()
scrDrawHead(0)
if maskon=1 scrDrawMask(0)

if global.godmode=1{
draw_sprite_ext(sprHalo,head_FrameIndex,x+maddx+0.5,y+maddy+0.5,image_xscale,image_yscale,dir,c_black,0.2)
draw_sprite_ext(sprHalo,head_FrameIndex,x+maddx,y+maddy,image_xscale,image_yscale,dir,image_blend,image_alpha)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
