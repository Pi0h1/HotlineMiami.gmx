<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprMaskMenu</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Masks and descriptions
name[0]="Richard"
name[1]="Rasmus"
name[2]="Tony"
name[3]="Aubrey"
name[4]="Don Juan"
name[5]="Graham"
name[6]="Dennis"
name[7]="George"
name[8]="Ted"
name[9]="Rufus"
name[10]="Rami"
name[11]="Willem"
name[12]="Peter"
name[13]="Zack"
name[14]="Oscar"
name[15]="Rick"
name[16]="Brandon"
name[17]="Charlie"
name[18]="Louie"
name[19]="Phil"
name[20]="Nigel"
name[21]="Earl"
name[22]="Jones"
name[23]="Carl"
name[24]="Jake"
name[25]="Richter"
description[0]=""
description[1]="An eye for secrets"
description[2]="Fists of fury"
description[3]="More guns"
description[4]="Lethal doors"
description[5]="Walk fast"
description[6]="Start with knife"
description[7]="Look further"
description[8]="Dogs don't attack"
description[9]="Survive one bullet"
description[10]="Extra ammo"
description[11]="Rip and steal"
description[12]="Quiet gunshots"
description[13]="Longer combo window"
description[14]="Darkness"
description[15]="Good shot"
description[16]="Walk faster"
description[17]="More melee weapons"
description[18]="Hard to spot"
description[19]="French translation"
description[20]="Reversed controls"
description[21]="Survive two bullets"
description[22]="More gore"
description[23]="Start with drill"
description[24]="Killing throws"
description[25]="Start with silenced uzi"
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Initalize variables
sprite_index=sprMasksBig
maskTotal = sprite_get_number(sprMasksBig);
global.barehanded=1
select=0
masks=maskTotal
maskx=0
masky=room_height+40
dir=0
on=1
wait=0
maskspeed=8

blacky=32
global.maskon=0
select=global.maskindex
global.maskindex=0
i=0 
repeat (maskTotal) {
if global.masks[i]=0 name[i]="Unavailable"
i+=1
}

global.selectmask=0
save=1

global.maskload=1
with objPlayer {
vdist=point_distance(x,y,room_width/2,room_height/2)
vdir=point_direction(room_width/2,room_height/2,x,y)
view_xview[0]=x+lengthdir_x(vdist*0.2,vdir-180)-view_wview[0]*0.5
view_yview[0]=y+lengthdir_y(vdist*0.2,vdir-180)-view_hview[0]*0.5
view_angle[0]=lengthdir_y(vdist*(1/160),vdir*2)
}
alarm[0]=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create save state
test=objPlayer.persistent
objPlayer.persistent=0
global.loaded=1
SaveGameState();
global.loaded=0
objPlayer.persistent=test
global.maskload=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Interaction
var menuUp      = keyboard_check_pressed(ord(global.upkey))     || mouse_wheel_up();
var menuDown    = keyboard_check_pressed(ord(global.downkey))   || mouse_wheel_down();
var menuConfirm = keyboard_check_pressed(vk_enter)              || mouse_check_button_pressed(mb_left);

if wait&gt;0 wait-=1

if menuUp {
    if !on or wait&gt;0 exit
    wait=3
    select-=1
    if select&lt;0 select=masks-1
    exit
    while global.masks[select]=0 {
    select-=1
    if select&lt;0 select=masks-1
    }
}

if menuDown {
    if !on or wait&gt;0 exit
    wait=3
    select+=1
    if select&gt;masks-1 select=0
    exit
    while global.masks[select]=0 {
    select+=1
    if select&gt;masks-1 select=0
    }
}

if menuConfirm {
    if global.masks[select]=0 exit
    if on=0 exit
    if !instance_exists(objPlayer) exit
    on=0
    with objPlayer {
    reload=30
    image_index=0
    image_speed=0.15
    sprite_index=sprPMaskSlip
    }
    if select=0 objPlayer.masksprite=sprRoosterMask
    if select=1 objPlayer.masksprite=sprOwlMask
    if select=2 objPlayer.masksprite=sprTigerMask
    if select=3 objPlayer.masksprite=sprPigMask
    if select=4 objPlayer.masksprite=sprHorseMask
    if select=5 objPlayer.masksprite=sprRabbitMask
    if select=6 objPlayer.masksprite=sprWolfMask
    if select=7 objPlayer.masksprite=sprGiraffeMask
    if select=8 objPlayer.masksprite=sprCollieMask
    if select=9 objPlayer.masksprite=sprElephantMask
    if select=10 objPlayer.masksprite=sprCamelMask
    if select=11 objPlayer.masksprite=sprMonkeyMask
    if select=12 objPlayer.masksprite=sprUnicornMask
    if select=13 objPlayer.masksprite=sprFrogMask
    if select=14 objPlayer.masksprite=sprMoleMask
    if select=15 objPlayer.masksprite=sprFoxMask
    if select=16 objPlayer.masksprite=sprPantherMask
    if select=17 objPlayer.masksprite=sprOctopusMask
    if select=18 objPlayer.masksprite=sprChamelionMask
    if select=19 objPlayer.masksprite=sprFishMask
    if select=20 objPlayer.masksprite=sprBatMask
    if select=21 objPlayer.masksprite=sprWalrusMask
    if select=22 objPlayer.masksprite=sprCrocodileMask
    if select=23 objPlayer.masksprite=sprLocustMask
    if select=24 objPlayer.masksprite=sprCobraMask
    if select=25 objPlayer.masksprite=sprRatMask
    global.usedmask[select]=1
    scrSaveAchievements()
    global.maskindex=select
    objPlayer.maskindex=select
    if file_exists(working_directory+"\mask.nfo") file_delete(working_directory+"\mask.nfo")
    file=file_text_open_write(working_directory+"\mask.nfo")
    file_text_write_string(file,string(select))
    file_text_close(file)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw mask menu

/*
This event contains nothing but it is necessary for it to exist so that
objEffector can interact with the mask menu and draw it.
*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
