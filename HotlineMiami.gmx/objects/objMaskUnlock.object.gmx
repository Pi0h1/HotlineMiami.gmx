<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>dir=random(10000)
factor=0
mask=floor(random(6))
amount=180
maskamount=180
on=0
fade=0
currentmask=0
scrInitXboxButtons()
name[0]="Richard"
name[1]="Rasmus"
name[2]="Tony"
name[3]="Aubrey"
name[4]="Don Juan"
name[5]="Graham"
name[6]="Dennis"
name[7]="George"
name[8]="Ted"
name[9]="Rufus"
name[10]="Rami"
name[11]="Willem"
name[12]="Peter"
name[13]="Zack"
name[14]="Oscar"
name[15]="Rick"
name[16]="Brandon"
name[17]="Charlie"
name[18]="Louie"
name[19]="Phil"
name[20]="Nigel"
name[21]="Earl"
name[22]="Jones"
name[23]="Carl"
name[24]="Jake"
name[25]="Richter"
global.currentmask=0
if global.sequence=rmSequence1 global.currentmask=1
if global.sequence=rmSequence2 global.currentmask=2
if global.sequence=rmSequence3 global.currentmask=3
if global.sequence=rmSequence4 global.currentmask=4
if global.sequence=rmSequence5 global.currentmask=5
if global.sequence=rmSequence6 global.currentmask=6
if global.sequence=rmSequence7 global.currentmask=7
if global.sequence=rmSequence8 global.currentmask=8
if global.sequence=rmSequence9 global.currentmask=9
if global.sequence=rmSequence10 global.currentmask=10
if global.sequence=rmSequence11 global.currentmask=11
if global.sequence=rmSequence12 global.currentmask=12
if global.sequence=rmSequence13 global.currentmask=13
if global.sequence=rmSequence14 global.currentmask=14
if global.sequence=rmMCBar global.currentmask=15
if global.sequence=rmMCSequence2 global.currentmask=16
if global.sequence=rmMCSequence3 global.currentmask=17

/*if argument0=0 return 1 //metro
if argument0=1 return 2 //no talk
if argument0=2 return 3 //overdose
if argument0=3 return 4 //decadence
if argument0=4 return 5 //tension
if argument0=5 return 6 //full house
if argument0=6 return 7 //clean hit
if argument0=7 return 8 //neighbors
if argument0=8 return 9 //push it
if argument0=9 return 10 //crackdown
if argument0=10 return 11 //hot &amp; heavy
if argument0=11 return 12 //deadline
if argument0=12 return -1 //trauma
if argument0=13 return 13 //assault
if argument0=14 return 14 //vengeance
if argument0=15 return -1 //showdown
if argument0=16 return 15 //safehouse
if argument0=17 return 16 //fun games
if argument0=18 return -1
if argument0=19 return -1*/

if global.lastgrade&lt;7 or global.masks[global.currentmask]=1 {global.currentmask=global.newmask[0] currentmask=1} 
surface_set_target(global.surf1)
draw_clear_alpha(c_black,0)
surface_reset_target()
alarm[0]=100
shine=0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>exit if on=0 on=1 else fade=1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox=1 {
if checkbutton(0,getid(5)) {
if presstart=0 {
presstart=1
scrXboxMaskUnlockStart()
} 
} else presstart=0
}
SteamRunCallbacks()
if !surface_exists(global.surf1) {
global.surf1=surface_create(room_width,room_height)
surface_set_target(global.surf1)
draw_clear_alpha(c_black,0)
surface_reset_target()
}
surface_set_target(global.surf1)
draw_clear_alpha(c_black,0)
draw_set_font(fntUnlock)
draw_set_halign(fa_center)
draw_set_valign(fa_center)
draws=16+lengthdir_x(10,dir*8)
if draws&lt;=2 draws=2
i=0
add=6+lengthdir_x(6,maskamount)
if on=0 {text="NEW MASK" color=merge_color(c_maroon,c_purple,0.2+lengthdir_x(0.2,dir*3.33))+random(0.1)} else {text=name[global.currentmask] color=merge_color(c_teal,c_navy,0.2+lengthdir_x(0.2,dir*3.33)+random(0.1))}
repeat (draws)
{
draw_set_color(merge_color(color,c_white,i*(1/draws)))
draw_text_transformed(room_width/2-draws*0.5+i,room_height*0.75+add+i*0.5,text,0.9+i*0.01,0.9+i*0.03,lengthdir_x(3,dir*6))
i+=1
}
surface_reset_target()</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.xbox=1 exit
if on=0 {global.masks[global.currentmask]=1 on=1} else {if maskamount=0 {if currentmask&lt;global.newmasks {global.currentmask=global.newmask[currentmask] currentmask+=1 shine=1} else {scrCheckMasks() fade=1}}}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>add1=(0.1+lengthdir_x(0.1,maskamount))*-1
add2=-lengthdir_x(0.3,maskamount)
add3=10+lengthdir_x(10,maskamount)
color1=merge_color(merge_color(c_black,c_purple,0.2+lengthdir_x(0.2,dir*0.623)),c_black,0.95+add1+lengthdir_x(0.05,dir*0.9))
color2=merge_color(merge_color(c_fuchsia,c_red,0.5+add2+lengthdir_x(0.2,dir*0.832)),c_black,0.9+add1+lengthdir_x(0.1,dir*1.32))
dir+=0.5
draw_rectangle_color(0,56+lengthdir_x(12,maskamount)-add3,room_width,room_height-(56+lengthdir_x(12,maskamount))-add3,color1,color1,color2,color2,0)

draw_set_blend_mode(bm_add)
//draw_circle_color(room_width/2,room_height/2,room_width*0.8,c_dkgray,c_black,0)
color1=make_color_hsv(25+lengthdir_x(10,dir*4),155+lengthdir_x(100,dir*2.523),25+lengthdir_x(5,dir*5.545))
i=0
add1=lengthdir_x(50,maskamount)
add2=lengthdir_x(2,maskamount)
repeat (32) {
length=room_width/2.5+lengthdir_x(32,dir*3+i*60)+add1
draw_line_width_color(room_width/2,room_height/2-add3,room_width/2+lengthdir_x(length*1.25,dir+i*(360/32)),room_height/2-add3+lengthdir_y(length,dir+i*(360/32)),5+add2+lengthdir_x(2,dir*10+i*((360/32)*5)),color1,c_black)
i+=1
}
draw_set_blend_mode(bm_subtract)

draw_circle_color(room_width/2,room_height/2-add3,room_width*0.8,c_black,c_gray,0)
draw_set_blend_mode(bm_normal)
draw_set_color(c_black)
draw_rectangle(0,0,room_width,56+lengthdir_x(12,maskamount)-add3,0)
draw_rectangle(0,room_height,room_width,room_height-(56+lengthdir_x(12,maskamount))-add3,0)

if on=1 {
if maskamount&gt;0 maskamount-=5 else global.masks[global.currentmask]=1
}


d3d_set_projection_ortho(0,0,399,255,lengthdir_x(3,dir*12))
color1=c_black
color2=c_black
color3=c_black
color4=c_black
if maskamount&lt;180 color1=merge_color(c_black,c_white,0.5+lengthdir_x(0.5,maskamount))
if maskamount&lt;135 color2=merge_color(c_black,c_white,0.5+lengthdir_x(0.5,maskamount*(180/135)))
if maskamount&lt;90 color3=merge_color(c_black,c_white,0.5+lengthdir_x(0.5,maskamount*(180/90)))
if maskamount&lt;45 color4=merge_color(c_black,c_white,0.5+lengthdir_x(0.5,maskamount*(180/45)))
scale=2+lengthdir_x(0.5,maskamount)+lengthdir_x(0.05+lengthdir_x(0.025,maskamount),dir*10)

draw_sprite_general(sprMasksBig,global.currentmask,0,0,120,120,room_width/2-55*scale+2,room_height/2-65*scale+2-add3,scale,scale,0,c_black,c_black,c_black,c_black,0.5)
draw_sprite_general(sprMasksBig,global.currentmask,0,0,120,120,room_width/2-55*scale,room_height/2-65*scale-add3,scale,scale,0,color1,color2,color3,color4,1)

d3d_set_projection_ortho(0,0,399,255,0)
if surface_exists(global.surf1) {
draw_surface_ext(global.surf1,-1,0,1,1,0,c_black,1)
draw_surface_ext(global.surf1,1,0,1,1,0,c_black,1)
draw_surface_ext(global.surf1,0,1,1,1,0,c_black,1)
draw_surface_ext(global.surf1,0,-1,1,1,0,c_black,1)
draw_surface_ext(global.surf1,0,0,1,1,0,c_white,1)
}
if shine&gt;0 {
draw_set_alpha(shine)
draw_set_color(c_white)
draw_rectangle(0,0,room_width,room_height,0)
shine-=0.1
draw_set_alpha(1)
}


draw_set_blend_mode(bm_subtract)
my_y=random(32)
draw_sprite_tiled(sprScanlines,0,0,my_y)
draw_set_blend_mode(bm_normal)

if fade=0 {
if amount&lt;180 {
amount+=5
color1=merge_color(c_black,merge_color(c_aqua,c_white,0.5+lengthdir_x(0.5,amount)),0.5+lengthdir_x(0.5,amount))
if amount&gt;90 color2=merge_color(c_black,merge_color(c_fuchsia,c_white,abs(lengthdir_y(1,amount))),abs(lengthdir_y(1,amount))) else color2=c_white
draw_set_blend_mode(bm_subtract)
draw_rectangle_color(-10,-10,view_wview[0]+10,view_hview[0]+10,color1,color2,color2,color1,0)
draw_set_blend_mode(bm_normal)
}
}

if fade=1 {
if amount&gt;0  {
amount-=10
if global.newguns=0 sxeasy_setVolume(amount*(1/180))
color1=merge_color(c_black,merge_color(c_aqua,c_white,0.5+lengthdir_x(0.5,amount)),0.5+lengthdir_x(0.5,amount))
if amount&gt;90 color2=merge_color(c_black,merge_color(c_fuchsia,c_white,abs(lengthdir_y(1,amount))),abs(lengthdir_y(1,amount))) else color2=c_white
draw_set_blend_mode(bm_subtract)
draw_rectangle_color(-10,-10,view_wview[0]+10,view_hview[0]+10,color2,color1,color1,color2,0)
draw_set_blend_mode(bm_normal)
} else {
global.masks[global.currentmask]=1
global.levels[scrGetCurrentLevel()]=1
global.newmasks=0
song=working_directory+"\Daisuke.mp3"
if global.newguns&gt;0 next=rmWeaponUnlock else {
scrResetScore()
if global.sequence=rmMCSequence2Downstairs or global.sequence=rmMCSequence3Downstairs {sxeasy_close() scrSaveUnlocked() game_restart() draw_clear(c_black) exit} else {
next=scrGetSequence(global.sequence)
sxeasy_stop(1) sxeasy_setVolume(0) sxeasy_play(song);
scrSaveUnlocked()
}
}

room_goto(next)
}
//else {fade=0 if restart=1 {sxeasy_stop(1) sxeasy_setVolume(0) sxeasy_play(working_directory+"\HorseSteppin.mp3"); room=rmMenu} else {if next=1 {if newsong=1 {sxeasy_stop(1) sxeasy_setVolume(0) sxeasy_play(song);} room=nextroom} else {scrResetSurfaces() game_load(working_directory+"\tempsave.sav")}}}
}</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
